<script>
        // --- EXISTING THEME & REVEAL LOGIC ---
        const themeToggle = document.getElementById('themeToggle');
        const sunIcon = document.querySelector('.sun-icon');
        const moonIcon = document.querySelector('.moon-icon');
        const html = document.documentElement;
        const savedTheme = localStorage.getItem('theme') || 'dark';
        html.setAttribute('data-theme', savedTheme);
        updateIcons(savedTheme);

        themeToggle.addEventListener('click', () => {
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateIcons(newTheme);
        });

        function updateIcons(theme) {
            if (theme === 'dark') {
                sunIcon.style.display = 'none';
                moonIcon.style.display = 'block';
            } else {
                sunIcon.style.display = 'block';
                moonIcon.style.display = 'none';
            }
        }

        function reveal() {
            var reveals = document.querySelectorAll(".reveal");
            for (var i = 0; i < reveals.length; i++) {
                reveals[i].classList.add("active");
            }
        }
        window.addEventListener("scroll", reveal);
        reveal();

        // --- INFINITE SCROLL LOGIC ---
        const container = document.getElementById('scrollContainer');
        const wrapper = document.getElementById('scrollWrapper');
        
        // 1. Clone items for infinite loop
        // We check length to prevent double-cloning if script re-runs
        if (wrapper.children.length > 0 && wrapper.children.length < 20) {
            const cards = Array.from(wrapper.children);
            
            // Clone for End
            cards.forEach(card => {
                const clone = card.cloneNode(true);
                clone.setAttribute('aria-hidden', 'true');
                wrapper.appendChild(clone);
            });
            
            // Clone for Start
            cards.reverse().forEach(card => {
                const clone = card.cloneNode(true);
                clone.setAttribute('aria-hidden', 'true');
                wrapper.prepend(clone);
            });
        }

        // 2. Set initial scroll position to the middle
        function centerScroll() {
            // We use a timeout to ensure all images/styles are loaded
            setTimeout(() => {
                const scrollWidth = wrapper.scrollWidth;
                container.scrollLeft = scrollWidth / 3;
            }, 100);
        }
        
        window.onload = centerScroll;

        // 3. Teleport Logic (Infinite Loop)
        container.addEventListener('scroll', () => {
            const maxScrollLeft = container.scrollWidth - container.clientWidth;
            
            // If scrolled to the very end (right), snap back to middle
            if (container.scrollLeft >= maxScrollLeft - 50) { 
                container.scrollLeft = container.scrollWidth / 3;
            } 
            // If scrolled to the very start (left), snap forward to middle
            else if (container.scrollLeft <= 50) {
                container.scrollLeft = container.scrollWidth / 3;
            }
        });

        // 4. Horizontal Mouse Wheel
        container.addEventListener("wheel", (evt) => {
            evt.preventDefault();
            
            // UPDATED: Set to 0.5 (Half speed). 
            // 0.2 was likely too small for your mouse to register a pixel change.
            container.scrollLeft += evt.deltaY * 0.5;
        });
    </script>